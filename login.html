<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PACHI Admin</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
</head>

<body class="bg-black min-h-screen flex items-center justify-center px-4">

    <div class="w-full max-w-sm sm:max-w-md">

        <div class="bg-zinc-900/95 backdrop-blur-xl 
                    border border-white/5 
                    p-6 sm:p-8 
                    rounded-3xl 
                    shadow-2xl shadow-black/40">

            <h1 class="text-2xl sm:text-3xl font-extrabold text-yellow-400 text-center mb-8 tracking-wide">
                PACHI Admin
            </h1>

            <form id="loginForm" class="space-y-5">

                <!-- EMAIL -->
                <div>
                    <input type="email" id="email" placeholder="Email" class="w-full p-3 text-base rounded-xl bg-zinc-800 text-white 
                               border border-zinc-700 
                               focus:outline-none focus:ring-2 focus:ring-yellow-400 
                               transition-all">
                </div>

                <!-- PASSWORD + TOGGLE -->
                <div class="relative">
                    <input type="password" id="password" placeholder="ContraseÃ±a" class="w-full p-3 pr-12 text-base rounded-xl bg-zinc-800 text-white 
                               border border-zinc-700 
                               focus:outline-none focus:ring-2 focus:ring-yellow-400 
                               transition-all">

                    <button type="button" id="togglePassword" class="absolute right-3 top-1/2 -translate-y-1/2 
                               text-zinc-400 hover:text-yellow-400 transition">
                        <span class="material-symbols-outlined text-lg">
                            visibility
                        </span>
                    </button>
                </div>

                <button class="w-full bg-red-500 hover:bg-red-600 
                           active:scale-[0.98] 
                           transition-all duration-200 
                           text-white font-bold py-3 rounded-xl shadow-lg shadow-red-500/20">
                    Iniciar sesiÃ³n
                </button>

            </form>

        </div>

        <p class="text-center text-xs text-zinc-500 mt-6">
            Â© RotiserÃ­a Pachi
        </p>

    </div>

    <script type="module">
        import { login } from "./js/auth.js";

        const form = document.getElementById("loginForm");
        const passwordInput = document.getElementById("password");
        const toggleBtn = document.getElementById("togglePassword");
        const icon = toggleBtn.querySelector("span");

        // ðŸ‘ Mostrar / ocultar contraseÃ±a
        toggleBtn.addEventListener("click", () => {
            const isPassword = passwordInput.type === "password";
            passwordInput.type = isPassword ? "text" : "password";
            icon.textContent = isPassword ? "visibility_off" : "visibility";
        });

        form.addEventListener("submit", async e => {
            e.preventDefault();

            const email = document.getElementById("email").value;
            const pass = passwordInput.value;

            const ok = await login(email, pass);

            if (ok) {
                window.location.href = "dash.html";
            } else {
                alert("Credenciales incorrectas");
            }
        });
    </script>

</body>

</html>